<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('partials/head') %>
  <title>Edit Project | Climate Solutions</title>
</head>
<body class="bg-base-200">
  <%- include('partials/navbar', { page: "" }) %>
  <div class="container mx-auto px-4 py-12">
    <h1 class="text-4xl font-bold mb-6">Edit Project: <%= project.title %></h1>
    <form action="/solutions/editProject" method="POST" class="space-y-4">
      <!-- Hidden field to keep track of the project ID -->
      <input type="hidden" name="id" value="<%= project.id %>">
      <div>
        <label class="block font-semibold" for="title">Title</label>
        <input type="text" id="title" name="title" value="<%= project.title %>" required class="input input-bordered w-full">
      </div>
      <div>
        <label class="block font-semibold" for="feature_img_url">Feature Image URL</label>
        <input type="url" id="feature_img_url" name="feature_img_url" value="<%= project.feature_img_url %>" required class="input input-bordered w-full">
      </div>
      <div>
        <label class="block font-semibold" for="sector_id">Sector</label>
        <select id="sector_id" name="sector_id" required class="select select-bordered w-full">
          <% sectors.forEach(sector => { %>
            <option value="<%= sector.id %>" <%= (project.sector_id === sector.id) ? "selected" : "" %>>
              <%= sector.sector_name %>
            </option>
          <% }) %>
        </select>
      </div>
      <div>
        <label class="block font-semibold" for="intro_short">Intro</label>
        <textarea id="intro_short" name="intro_short" required class="textarea textarea-bordered w-full"><%= project.intro_short %></textarea>
      </div>
      <div>
        <label class="block font-semibold" for="summary_short">Summary</label>
        <textarea id="summary_short" name="summary_short" required class="textarea textarea-bordered w-full"><%= project.summary_short %></textarea>
      </div>
      <div>
        <label class="block font-semibold" for="impact">Impact</label>
        <textarea id="impact" name="impact" required class="textarea textarea-bordered w-full"><%= project.impact %></textarea>
      </div>
      <div>
        <label class="block font-semibold" for="original_source_url">Original Source URL</label>
        <input type="url" id="original_source_url" name="original_source_url" value="<%= project.original_source_url %>" required class="input input-bordered w-full">
      </div>
      <div class="flex gap-4">
        <button type="submit" class="btn btn-primary">Update Project</button>
        <a href="/solutions/deleteProject/<%= project.id %>" 
           class="btn btn-error" 
           onclick="return confirm('Are you sure you want to delete this project?');">
          Delete Project
        </a>
      </div>
    </form>
  </div>
</body>
</html>
